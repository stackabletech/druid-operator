---
apiVersion: druid.stackable.tech/v1alpha1
kind: DruidCluster
metadata:
  name: psql-druid
  uid: test-uid
spec:
  version: 24.0.0-stackable0.1.0
  zookeeperConfigMapName: psql-druid-znode
  metadataStorageDatabase:
    dbType: postgresql
    connString: jdbc:postgresql://druid-postgresql/druid
    host: druid-postgresql
    port: 5432
    user: druid
    password: druid
  deepStorage:
    hdfs:
      configMapName: simple-hdfs
      directory: /druid
  brokers:
    roleGroups:
      default:
        config: {}
        replicas: 1
  coordinators:
    roleGroups:
      default:
        config: {}
        replicas: 1
  historicals:
    config:
      resources:
        cpu:
          min: '200m'
          max: '4'
        memory:
          limit: '2Gi'
        storage:
          segmentCacheSizeGb: 2
    roleGroups:
      default:
        config:
          resources:
            cpu:
              min: '200m'
              max: '4'
            memory:
              limit: '2Gi'
            storage:
              segmentCacheSizeGb: 3
        replicas: 1
      secondary:
        config: {}
        replicas: 1
  middleManagers:
    roleGroups:
      default:
        config: {}
        replicas: 1
  routers:
    roleGroups:
      default:
        config: {}
        replicas: 1
